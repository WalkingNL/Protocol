
## gossip 协议详解

1. 什么是gossip协议

    **gossip**是一种被应用在多播通信中的传输协议。与其他应用在多播通信中的传输协议相较，其在信息传递的强壮性及传播效率两方面有较好的折衷。这个有点也使得gossip协议在大数据领域更为广泛。

2. 扩散方式有哪些

    2.1 全部通知模型
         
      当一个节点接收到更新之后，会立即通知其他节点。其他节点会根据版本或者时间戳等信息进行判断，是否要进行更新。如果不需要更新，就什么也不做。可以看到这种扩散的方式仅存在于理想的情况下，并没有考虑如果网络故障或者节点之间，数据传输的过程中，丢失的情况。

    2.2 反熵模型
      
      针对单一已更新的节点(通过时间戳标明)，所有其他节点分两种情况：1，未感染；2，已感染。每一个节点有规则的以随机的方式，选择其他节点，然后交换内容，消除节点间内容上的差异。节点间数据的更新方式分三种
         
      * Push. 节点P将更新的信息推给Q，然后根据时间戳等判断是否Q是否需要更新
      * Pull. 节点P从Q获取信息，然后根据时间戳判断自身是否需要更新
      * Push-Pull. 节点P首先将信息推送给Q，然后判断Q是否需要更新。如果不需要，则从Q获取信息，判断自身是否需要更新

      收敛分析：当少量节点仍然没有更新的时候，Push的收敛速度最慢，相比而言Pull快一些，而Push-Pull为最快。
      
      优点：1，理论上，最终所有的节点的数据都会被更新。2，对Push的实现而言，期望时间为log\_2(n) + ln(n)
      
      缺点：1，更新的传播比*全部通知模型*要慢；2，必须检查数据库内容，在时间中很少使用Push模型
      
    2.3 散播谣言模型
      相较反熵模型，增加了传播停止判断。对于一个热节点(hot node)，因为刚刚更新了数据，所以可以主动随机的选择其他节点进行信息交换。如果这个过程中，选择的某个节点已经被更新了，那么这个P节点增加不主动通知其他节点的概率。达到一定程度之后，节点P就会停止这样的通知行为。


